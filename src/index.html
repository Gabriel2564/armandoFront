<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock - LlanterÃ­a</title>
    <link rel="stylesheet" href="css/stock.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <h1>ðŸ“¦ Sistema de Stock - LlanterÃ­a</h1>
            <div class="header-actions">
                <button id="btn-ir-ventas" class="btn btn-success">ðŸ›’ Ir a Ventas</button>
                <button id="btn-nuevo-stock" class="btn btn-primary">âž• Nuevo Stock</button>
            </div>
        </header>

        <!-- Filtros -->
        <div class="filters-section">
            <h2>Filtros</h2>
            <div class="filters">
                <select id="filter-tipo" class="filter-select">
                    <option value="">Todas las Familias (Tipos)</option>
                </select>
                <select id="filter-estado" class="filter-select">
                    <option value="">Todos los Estados</option>
                    <option value="ACTIVO">Activos</option>
                    <option value="AGOTADO">Agotados</option>
                </select>
                <input type="text" id="search-input" placeholder="ðŸ” Buscar por cÃ³digo o nombre..." class="search-input">
            </div>
        </div>

        <!-- Tabla de Stock -->
        <div class="table-container">
            <table id="stock-table">
                <thead>
                    <tr>
                        <th>CÃ³digo</th>
                        <th>Producto</th>
                        <th>Tipo</th>
                        <th>NÃºmero Lote</th>
                        <th>Stock Inicial</th>
                        <th>Stock Actual</th>
                        <th>Stock Vendido</th>
                        <th>Precio Venta</th>
                        <th>Fecha Entrada</th>
                        <th>Fecha TerminaciÃ³n</th>
                        <th>DÃ­as Activo</th>
                        <th>Estado</th>
                    </tr>
                </thead>
                <tbody id="stock-body">
                    <tr>
                        <td colspan="12" class="loading">Cargando stock...</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Modal Nuevo Stock -->
    <div id="modal-nuevo-stock" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>âž• Comprar Nuevo Stock</h2>
                <button id="btn-close-modal" class="btn-close">âœ•</button>
            </div>

            <div class="modal-body">
                <div class="form-group">
                    <label>Seleccionar Producto</label>
                    <select id="select-producto" class="form-control" required>
                        <option value="">-- Seleccione un producto --</option>
                    </select>
                </div>

                <div class="producto-info hidden" id="producto-info">
                    <h3 id="info-nombre"></h3>
                    <p><strong>CÃ³digo:</strong> <span id="info-codigo"></span></p>
                    <p><strong>Tipo:</strong> <span id="info-tipo"></span></p>
                    <p><strong>Precio Venta:</strong> S/ <span id="info-precio"></span></p>
                    <p><strong>Stock Total Actual:</strong> <span id="info-stock-actual"></span> unidades</p>
                </div>

                <form id="form-nuevo-lote" class="hidden">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Cantidad de Stock *</label>
                            <input type="number" id="input-stock" min="1" required>
                        </div>
                        <div class="form-group">
                            <label>Precio de Compra *</label>
                            <input type="number" id="input-precio-compra" step="0.01" min="0" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Fecha de Entrada</label>
                        <input type="datetime-local" id="input-fecha-entrada">
                    </div>

                    <div class="form-group">
                        <label>Observaciones</label>
                        <textarea id="input-observaciones" rows="3" placeholder="Ej: Proveedor, condiciones, etc."></textarea>
                    </div>

                    <div class="modal-actions">
                        <button type="button" id="btn-cancelar" class="btn btn-secondary">Cancelar</button>
                        <button type="submit" class="btn btn-primary">Registrar Nuevo Lote</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="js/api.js"></script>
    <script src="js/stock.js"></script>
</body>
</html>